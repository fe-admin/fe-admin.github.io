{"version":3,"sources":["webpack:///./src/mixins/index.js","webpack:///./src/views/user/Login/index.vue?e19c","webpack:///./src/views/user/js/login.js","webpack:///src/views/user/Login/index.vue","webpack:///./src/views/user/Login/index.vue?c07b","webpack:///./src/views/user/Login/index.vue","webpack:///./src/views/user/style/login.scss?6b07"],"names":["pageMixin","showButton","data","pageSizes","pageSize","total","currentPage","mapActions","hideDialog","type","this","currentIndex","currentRow","showDialog","scope","$index","row","screenLoading","methods","go","num","$router","push","param","replace","locationPush","path","appName","url","location","origin","window","microConfig","locationReplace","$push","microPath","appPath","current","localStorage","getItem","microId","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","_v","on","handleClick","model","value","callback","$$v","activeName","expression","alertMsg","_e","ref","userForm","formRule","nativeOn","$event","preventDefault","validate","indexOf","_k","keyCode","key","handleLogin","$set","trim","slot","pwdType","class","changePwdType","phoneForm","getSmsNumber","checked","loading","staticRenderFns","name","mixins","pwdAlert","accountName","password","phone","smsNumber","required","message","trigger","min","max","len","smsText","smsNum","waiting","computed","getSmsText","created","debounce","login","Form","err","result","setToken","token","sleep","loginSuccess","$refs","v","field","cb","resetFields","component"],"mappings":"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","file":"js/user.1744f845.js","sourcesContent":["import { mapActions } from \"vuex\";\nimport { microId, showButton } from \"../utils\";\nimport { getButtonList } from \"../api\";\n\nexport const authMixin = {\n  data() {\n    return { buttonList: [] };\n  },\n  mounted() {\n    this.getButtonList();\n  },\n  methods: {\n    showButton,\n    async getButtonList() {\n      const { mid } = this.$route.query;\n      if (!mid) return;\n      const [err, result] = await getButtonList(mid);\n      this.buttonList = result;\n    },\n  },\n};\n\n/**\n * 分页混入\n * @date 2020-08-14\n * @returns {any}\n */\n\nexport const pageMixin = {\n  data() {\n    return {\n      pageSizes: [10, 20, 50, 100],\n      pageSize: 10, // 每页显示条目个数\n      total: 1, // 总条目数\n      currentPage: 1,\n    };\n  },\n};\n\n/**\n * 全局弹窗混入\n * @date 2020-08-14\n * @returns {any}\n */\nexport const dialogMixin = {\n  data() {\n    return {\n      currentIndex: null,\n      currentRow: null,\n    };\n  },\n  methods: {\n    ...mapActions([\"update\"]),\n    hideDialog(type) {\n      this[`${type}Visible`] = false;\n      this.currentIndex = null;\n      this.currentRow = null;\n    },\n    showDialog(type, scope) {\n      this[`${type}Visible`] = true;\n      if (scope) {\n        this.currentIndex = scope.$index;\n        this.currentRow = scope.row;\n      }\n    },\n  },\n};\n/**\n * 默认混入 路由 && loading\n * @date 2020-08-14\n * @returns {any}\n */\n\nexport default {\n  data() {\n    return { screenLoading: false };\n  },\n  methods: {\n    go(num) {\n      this.$router.go(num);\n    },\n    push(param) {\n      this.$router.push(param);\n    },\n    replace(param) {\n      this.$router.replace(param);\n    },\n\n    /**\n     * 跨应用路由跳转\n     * @date 2020-08-14\n     * @param {any} microPath 微服务path\n     * @param {any} appPath 应用内path\n     * @param {any} appName 非微服务第三方跳转\n     * @returns {any}\n     */\n\n    /**\n     * 根据appName切换origin\n     * @date 2020-08-14\n     * @param {any} path\n     * @param {any} appName\n     * @returns {any}\n     */\n\n    locationPush(path, appName) {\n      let url = location.origin;\n      if (window.microConfig) {\n        url = appName ? window.microConfig[appName] : location.origin;\n      }\n      location.replace(`${url}${path}`);\n    },\n\n    /**\n     * 根据appName切换origin\n     * @date 2020-08-14\n     * @param {any} path\n     * @param {any} appName\n     * @returns {any}\n     */\n    locationReplace(path, appName) {\n      let url = location.origin;\n      if (window.microConfig) {\n        url = appName ? window.microConfig[appName] : location.origin;\n      }\n      location.replace(`${url}${path}`);\n    },\n\n    /**\n     * 路由跳转\n     * @date 2020-08-14\n     * @param {any} microPath 微服务path\n     * @param {any} appPath 应用内path\n     * @param {any} appName 非微服务第三方跳转\n     * @returns {any}\n     */\n    $push(microPath, appPath, appName) {\n      const current = localStorage.getItem(\"microId\");\n      if (microId() === \"portal\") {\n        this.locationPush(microPath);\n      } else if (appName) {\n        if (current === appName) {\n          this.push(appPath);\n        } else {\n          this.locationPush(appPath, appName);\n        }\n      } else {\n        this.push(appPath);\n      }\n    },\n  },\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"login\"},[_c('div',{staticClass:\"login-head\"},[_c('div',{staticClass:\"login-logo\"},[_c('img',{staticClass:\"img\",attrs:{\"src\":\"/favicon.png\"}}),_c('svg-icon',{attrs:{\"iconName\":\"fe-logo-text\"}})],1),_c('div',{staticClass:\"desc\"},[_vm._v(\"Fe Admin 只为一款简单好用的前端中台系统\")])]),_c('div',{staticClass:\"login-form\"},[_c('el-tabs',{on:{\"tab-click\":_vm.handleClick},model:{value:(_vm.activeName),callback:function ($$v) {_vm.activeName=$$v},expression:\"activeName\"}},[_c('el-tab-pane',{attrs:{\"label\":\"账户密码登录\",\"name\":\"password\"}},[(_vm.pwdAlert)?_c('el-alert',{attrs:{\"closable\":false,\"title\":_vm.alertMsg,\"type\":\"error\",\"show-icon\":\"\"}}):_vm._e(),_c('el-form',{ref:\"userForm\",attrs:{\"model\":_vm.userForm,\"rules\":_vm.formRule,\"size\":\"medium\"}},[_c('el-form-item',{attrs:{\"prop\":\"accountName\"},nativeOn:{\"submit\":function($event){$event.preventDefault();}}},[_c('el-input',{attrs:{\"maxlength\":11,\"placeholder\":\"用户名: admin or user\",\"clearable\":\"\"},on:{\"change\":function($event){return _vm.validate('accountName')}},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.handleLogin($event)}},model:{value:(_vm.userForm.accountName),callback:function ($$v) {_vm.$set(_vm.userForm, \"accountName\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"userForm.accountName\"}},[_c('i',{staticClass:\"el-input__icon fe-admin fe-user\",attrs:{\"slot\":\"prefix\"},slot:\"prefix\"})])],1),_c('el-form-item',{attrs:{\"prop\":\"password\"}},[_c('el-input',{attrs:{\"maxlength\":12,\"type\":_vm.pwdType ? 'password' : '',\"placeholder\":\"密码: fe-admin\",\"clearable\":\"\"},on:{\"change\":function($event){return _vm.validate('password')}},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.handleLogin($event)}},model:{value:(_vm.userForm.password),callback:function ($$v) {_vm.$set(_vm.userForm, \"password\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"userForm.password\"}},[_c('i',{staticClass:\"el-input__icon fe-admin fe-lock\",attrs:{\"slot\":\"prefix\"},slot:\"prefix\"}),_c('i',{class:(\"el-input__icon fe-admin fe-visible \" + (_vm.pwdType ? 'fe-invisible' : 'fe-visible')),attrs:{\"slot\":\"suffix\"},on:{\"click\":_vm.changePwdType},slot:\"suffix\"})])],1)],1)],1),_c('el-tab-pane',{attrs:{\"label\":\"手机号登录\",\"name\":\"phone\"}},[_c('el-form',{ref:\"phoneForm\",attrs:{\"model\":_vm.phoneForm,\"rules\":_vm.formRule,\"size\":\"medium\"}},[_c('el-form-item',{attrs:{\"prop\":\"phone\"},nativeOn:{\"submit\":function($event){$event.preventDefault();}}},[_c('el-input',{attrs:{\"maxlength\":11,\"placeholder\":\"请输入手机号！\"},on:{\"change\":function($event){return _vm.validate('phone')}},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.handleLogin($event)}},model:{value:(_vm.phoneForm.phone),callback:function ($$v) {_vm.$set(_vm.phoneForm, \"phone\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"phoneForm.phone\"}},[_c('i',{staticClass:\"el-input__icon fe-admin fe-phone\",attrs:{\"slot\":\"prefix\"},slot:\"prefix\"})])],1),_c('el-form-item',{staticClass:\"sms-item\",attrs:{\"prop\":\"smsNumber\"}},[_c('el-input',{attrs:{\"maxlength\":6,\"placeholder\":\"请输入验证码！\"},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.handleLogin($event)}},model:{value:(_vm.phoneForm.smsNumber),callback:function ($$v) {_vm.$set(_vm.phoneForm, \"smsNumber\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"phoneForm.smsNumber\"}},[_c('i',{staticClass:\"el-input__icon fe-admin fe-message\",attrs:{\"slot\":\"prefix\"},slot:\"prefix\"})]),_c('el-button',{on:{\"click\":_vm.getSmsNumber}},[_vm._v(\"获取验证码\")])],1)],1)],1)],1),_c('div',{staticClass:\"remember\"},[_c('el-checkbox',{model:{value:(_vm.checked),callback:function ($$v) {_vm.checked=$$v},expression:\"checked\"}},[_vm._v(\"自动登录\")]),_c('a',[_vm._v(\"忘记密码？\")])],1),_c('div',{staticClass:\"login-item\"},[_c('el-button',{attrs:{\"loading\":_vm.loading,\"type\":\"primary\"},on:{\"click\":_vm.handleLogin}},[_vm._v(\"提 交\")])],1),_c('div',{staticClass:\"other-type\"},[_vm._v(\" 其他登录方式 : \"),_c('svg-icon',{attrs:{\"iconName\":\"fe-zhifubao\"}}),_c('svg-icon',{attrs:{\"iconName\":\"fe-taobao\"}}),_c('svg-icon',{attrs:{\"iconName\":\"fe-weixin\"}}),_c('svg-icon',{attrs:{\"iconName\":\"fe-talk\"}})],1)],1),_c('fe-footer')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { mapActions } from \"vuex\";\nimport { login } from \"@/api\";\nimport { debounce, sleep } from \"@/utils\";\nimport { setToken } from \"@/utils/auth\";\nimport mixins from \"@/mixins\";\nexport default {\n  name: \"Login\",\n  mixins: [mixins],\n  data() {\n    return {\n      pwdAlert: false,\n      alertMsg: \"\",\n      activeName: \"password\",\n      pwdType: true,\n      checked: true,\n      loading: false,\n      userForm: {\n        accountName: \"\",\n        password: \"\",\n      },\n      phoneForm: {\n        phone: \"\",\n        smsNumber: \"\",\n      },\n      formRule: {\n        accountName: [\n          {\n            required: true,\n            message: \"请输入用户名\",\n            trigger: [\"change\", \"blur\"],\n          },\n        ],\n        password: [\n          {\n            required: true,\n            message: \"请输入密码\",\n            trigger: [\"change\", \"blur\"],\n          },\n          {\n            min: 6,\n            max: 12,\n            message: \"长度在 6 到 12 个字符\",\n            trigger: [\"change\", \"blur\"],\n          },\n        ],\n        phone: [\n          {\n            required: true,\n            message: \"请输入手机号\",\n            trigger: [\"change\", \"blur\"],\n          },\n          {\n            len: 11,\n            message: \"请输入手机号\",\n            trigger: [\"change\", \"blur\"],\n          },\n        ],\n        smsNumber: [\n          { required: true, message: \"请输入验证码\", trigger: \"blur\" },\n          { len: 6, message: \"请输入6位验证码\", trigger: \"blur\" },\n        ],\n      },\n      smsText: \"获取验证码\",\n      smsNum: 0,\n      waiting: false,\n    };\n  },\n  computed: {\n    getSmsText() {\n      return \"ss\";\n    },\n  },\n  created() {\n    this.handleLogin = debounce(this.handleLogin);\n  },\n\n  methods: {\n    ...mapActions([\"user/Login\"]),\n    async login() {\n      this.loading = true;\n      const { activeName } = this;\n      const Form = activeName === \"password\" ? \"userForm\" : \"phoneForm\";\n      const [err, result] = await login(this[Form]);\n      if (err) {\n        this.pwdAlert = true;\n        this.alertMsg = err.message;\n      } else {\n        this[\"user/Login\"](result);\n        setToken(result.token);\n        await sleep(1000);\n        this.loginSuccess();\n      }\n      this.loading = false;\n    },\n\n    loginSuccess() {\n      this.$router.push(\"/dashboard\");\n    },\n    // 账号密码非空验证\n    handleLogin() {\n      const { activeName } = this;\n      const Form = activeName === \"password\" ? \"userForm\" : \"phoneForm\";\n      this.$refs[Form].validate((v) => {\n        if (v) this.login();\n      });\n    },\n    validate(field, cb) {\n      // this.$refs.loginForm.validateField(field, cb);\n    },\n    getSmsNumber() {},\n    changePwdType() {\n      this.pwdType = !this.pwdType;\n    },\n    handleClick() {\n      const Form = this.activeName === \"password\" ? \"userForm\" : \"phoneForm\";\n      this.$refs[Form].resetFields();\n    },\n  },\n};\n","<template>\n  <div class=\"login\">\n    <div class=\"login-head\">\n      <div class=\"login-logo\">\n        <img class=\"img\" src=\"/favicon.png\" /><svg-icon\n          iconName=\"fe-logo-text\"\n        />\n      </div>\n      <div class=\"desc\">Fe Admin 只为一款简单好用的前端中台系统</div>\n    </div>\n    <div class=\"login-form\">\n      <el-tabs v-model=\"activeName\" @tab-click=\"handleClick\">\n        <el-tab-pane label=\"账户密码登录\" name=\"password\">\n          <el-alert\n            v-if=\"pwdAlert\"\n            :closable=\"false\"\n            :title=\"alertMsg\"\n            type=\"error\"\n            show-icon\n          >\n          </el-alert>\n          <el-form\n            :model=\"userForm\"\n            :rules=\"formRule\"\n            ref=\"userForm\"\n            size=\"medium\"\n          >\n            <el-form-item prop=\"accountName\" @submit.native.prevent>\n              <el-input\n                @keyup.enter.native=\"handleLogin\"\n                :maxlength=\"11\"\n                @change=\"validate('accountName')\"\n                placeholder=\"用户名: admin or user\"\n                v-model.trim=\"userForm.accountName\"\n                clearable\n              >\n                <i slot=\"prefix\" class=\"el-input__icon fe-admin fe-user\"></i>\n              </el-input>\n            </el-form-item>\n            <el-form-item prop=\"password\">\n              <el-input\n                @keyup.enter.native=\"handleLogin\"\n                :maxlength=\"12\"\n                @change=\"validate('password')\"\n                :type=\"pwdType ? 'password' : ''\"\n                v-model.trim=\"userForm.password\"\n                placeholder=\"密码: fe-admin\"\n                clearable\n              >\n                <i slot=\"prefix\" class=\"el-input__icon fe-admin fe-lock\"></i>\n                <i\n                  slot=\"suffix\"\n                  @click=\"changePwdType\"\n                  :class=\"\n                    `el-input__icon fe-admin fe-visible ${\n                      pwdType ? 'fe-invisible' : 'fe-visible'\n                    }`\n                  \"\n                ></i>\n              </el-input>\n            </el-form-item>\n          </el-form>\n        </el-tab-pane>\n\n        <el-tab-pane label=\"手机号登录\" name=\"phone\">\n          <el-form\n            :model=\"phoneForm\"\n            :rules=\"formRule\"\n            ref=\"phoneForm\"\n            size=\"medium\"\n          >\n            <el-form-item prop=\"phone\" @submit.native.prevent>\n              <el-input\n                @keyup.enter.native=\"handleLogin\"\n                :maxlength=\"11\"\n                @change=\"validate('phone')\"\n                placeholder=\"请输入手机号！\"\n                v-model.trim=\"phoneForm.phone\"\n              >\n                <i slot=\"prefix\" class=\"el-input__icon fe-admin fe-phone\"></i>\n              </el-input>\n            </el-form-item>\n            <el-form-item class=\"sms-item\" prop=\"smsNumber\">\n              <el-input\n                @keyup.enter.native=\"handleLogin\"\n                :maxlength=\"6\"\n                v-model.trim=\"phoneForm.smsNumber\"\n                placeholder=\"请输入验证码！\"\n              >\n                <i slot=\"prefix\" class=\"el-input__icon fe-admin fe-message\"></i>\n              </el-input>\n              <el-button @click=\"getSmsNumber\">获取验证码</el-button>\n            </el-form-item>\n          </el-form>\n        </el-tab-pane>\n      </el-tabs>\n\n      <div class=\"remember\">\n        <el-checkbox v-model=\"checked\">自动登录</el-checkbox>\n        <a>忘记密码？</a>\n      </div>\n      <div class=\"login-item\">\n        <el-button :loading=\"loading\" @click=\"handleLogin\" type=\"primary\"\n          >提 交</el-button\n        >\n      </div>\n      <div class=\"other-type\">\n        其他登录方式 :\n        <svg-icon iconName=\"fe-zhifubao\" />\n        <svg-icon iconName=\"fe-taobao\" />\n        <svg-icon iconName=\"fe-weixin\" />\n        <svg-icon iconName=\"fe-talk\" />\n      </div>\n    </div>\n    <fe-footer />\n  </div>\n</template>\n<script>\nimport Login from \"../js/login\";\nexport default Login;\n</script>\n<style src=\"../style/login.scss\" lang=\"scss\" scoped></style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=45681808&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"../style/login.scss?vue&type=style&index=0&id=45681808&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"45681808\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!./login.scss?vue&type=style&index=0&id=45681808&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!./login.scss?vue&type=style&index=0&id=45681808&lang=scss&scoped=true&\""],"sourceRoot":""}