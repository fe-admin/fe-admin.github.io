(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["user"],{"16a5":function(e,t,r){"use strict";var n=r("6d6c"),i=r.n(n);i.a},"594e":function(e,t,r){"use strict";var n=r("bc63"),i=r.n(n);i.a},"6d6c":function(e,t,r){},bc63:function(e,t,r){},be1e:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login"},[r("div",{staticClass:"login-content"},[r("div",{staticClass:"login-form"},[r("el-form",{ref:"formData",attrs:{model:e.formData,rules:e.formRule,size:"medium"}},[r("div",{staticClass:"tit"},[e._v("帐号登录")]),r("el-form-item",{staticClass:"el-form-line",attrs:{prop:"accountName"},nativeOn:{submit:function(e){e.preventDefault()}}},[r("el-input",{attrs:{maxlength:11,clearable:"",placeholder:"账户名"},on:{change:function(t){return e.change("accountName")}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin(t)}},model:{value:e.formData.accountName,callback:function(t){e.$set(e.formData,"accountName","string"===typeof t?t.trim():t)},expression:"formData.accountName"}})],1),r("el-form-item",{staticClass:"el-form-line",attrs:{prop:"password"}},[r("el-input",{attrs:{maxlength:12,clearable:"",placeholder:"密码",type:"password"},on:{change:function(t){e.errCode=3}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin(t)}},model:{value:e.formData.password,callback:function(t){e.$set(e.formData,"password","string"===typeof t?t.trim():t)},expression:"formData.password"}})],1),r("el-form-item",{staticClass:"login-item"},[r("el-button",{attrs:{loading:e.loading,type:"violet"},on:{click:e.handleLogin}},[e._v("登录")])],1),r("el-form-item",{staticClass:"rememberpwd"},[r("el-checkbox",{model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("记住登录名")]),r("el-divider",{attrs:{direction:"vertical"}}),r("router-link",{attrs:{to:"/user/register"}},[e._v("免费注册")]),r("el-divider",{attrs:{direction:"vertical"}}),r("router-link",{attrs:{to:"/user/register"}},[e._v("忘记密码")])],1)],1)],1)])])},i=[],a=(r("4160"),r("b64b"),r("159b"),r("5530")),o=(r("96cf"),r("1da1")),s=r("2f62"),c=r("365c"),u=r("ed08"),l=r("5f87"),d=(r("99af"),r("ac1f"),r("5319"),r("3835")),m=(u["f"],Object(a["a"])(Object(a["a"])({},Object(s["b"])(["update"])),{},{hideDialog:function(e){this["".concat(e,"Visible")]=!1,this.currentIndex=null,this.currentRow=null},showDialog:function(e,t){this["".concat(e,"Visible")]=!0,t&&(this.currentIndex=t.$index,this.currentRow=t.row)}}),{data:function(){return{screenLoading:!1}},methods:{go:function(e){this.$router.go(e)},push:function(e){this.$router.push(e)},replace:function(e){this.$router.replace(e)},pushState:function(e,t,r){var n=localStorage.getItem("microId");Object(u["c"])()?n===r?this.push(e):history.pushState(null,e,e):n===r?this.push(t):this.locationReplace(t,r)},locationPush:function(e,t){var r=location.origin;window.microConfig&&(r=t?window.microConfig[t]:location.origin),location.replace("".concat(r).concat(e))},locationReplace:function(e,t){var r=location.origin;window.microConfig&&(r=t?window.microConfig[t]:location.origin),location.replace("".concat(r).concat(e))},$push:function(e,t,r){var n=localStorage.getItem("microId");"portal"===Object(u["d"])()?this.locationPush(e):r?n===r?this.push(t):this.locationPush(t,r):this.push(t)},$replace:function(e,t,r){var n=localStorage.getItem("microId");Object(u["c"])()?n===r?this.push(e):this.locationReplace(e):n===r?this.push(t):this.locationReplace(t,r)}}}),g={name:"Login",mixins:[m],data:function(){return{checked:!1,loading:!1,formData:{accountName:localStorage.getItem("_userName")||"",password:""},formRule:{accountName:[{required:!0,message:"请输入账户名",trigger:["change","blur"]}],password:[{required:!0,message:"请输入密码",trigger:["change","blur"]},{min:6,max:12,message:"长度在 6 到 12 个字符",trigger:["change","blur"]}],smsNumber:[{required:!0,message:"请输入验证码",trigger:"blur"},{len:6,message:"请输入6位验证码",trigger:"blur"}]},smsText:"获取验证码",smsNum:0,waiting:!1}},created:function(){this.debounceSetFullBackground=Object(u["b"])((function(){Object(u["e"])(".login")})),this.handleLogin=Object(u["b"])(this.handleLogin)},mounted:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:Object(u["e"])(".login"),window.addEventListener("resize",e.debounceSetFullBackground);case 2:case"end":return t.stop()}}),t)})))()},methods:Object(a["a"])(Object(a["a"])({},Object(s["b"])(["Login"])),{},{login:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,r=Object.assign(e.formData,{token:1}),console.info(r),e.Login(r),Object.keys(r).forEach((function(e){localStorage.setItem(e,r[e])})),Object(l["c"])(r.token),t.next=8,Object(u["g"])(1e3);case 8:e.loginSuccess(),e.loading=!1;case 10:case"end":return t.stop()}}),t)})))()},loginSuccess:function(){this.$router.push("/dashboard")},handleLogin:function(){var e=this;this.$refs.formData.validate((function(t){t&&e.login()}))},change:function(e){this.$refs.formData.validateField(e)}}),beforeDestroy:function(){window.removeEventListener("resize",this.debounceSetFullBackground)}},f=g,h=(r("16a5"),r("2877")),p=Object(h["a"])(f,n,i,!1,null,"0eb127a6",null);t["default"]=p.exports},d819:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"register"},[r("div",{staticClass:"register-content"},[r("div",{staticClass:"register-form"},[r("el-form",{ref:"userForm",attrs:{model:e.userForm,rules:e.formRule,size:"medium"}},[r("div",{staticClass:"tit"},[e._v("帐号注册")]),r("el-form-item",{attrs:{prop:"userName"},nativeOn:{submit:function(e){e.preventDefault()}}},[r("el-input",{attrs:{maxlength:11,clearable:"",placeholder:"请输入用户名"},on:{input:function(t){return e.change("userName")}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin(t)}},model:{value:e.userForm.userName,callback:function(t){e.$set(e.userForm,"userName","string"===typeof t?t.trim():t)},expression:"userForm.userName"}},[r("svg",{staticClass:"icon",attrs:{slot:"prefix","aria-hidden":"true"},slot:"prefix"},[r("use",{attrs:{"xlink:href":"#iconzhanghu"}})])])],1),r("el-form-item",{attrs:{prop:"phoneNo"},nativeOn:{submit:function(e){e.preventDefault()}}},[r("el-input",{attrs:{maxlength:11,clearable:"",placeholder:"请输入手机号"},on:{input:function(t){return e.change("phoneNo")}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin(t)}},model:{value:e.userForm.phoneNo,callback:function(t){e.$set(e.userForm,"phoneNo","string"===typeof t?t.trim():t)},expression:"userForm.phoneNo"}},[r("svg",{staticClass:"icon",attrs:{slot:"prefix","aria-hidden":"true"},slot:"prefix"},[r("use",{attrs:{"xlink:href":"#iconzhanghu"}})])])],1),r("el-form-item",{attrs:{prop:"email"},nativeOn:{submit:function(e){e.preventDefault()}}},[r("el-input",{attrs:{maxlength:50,clearable:"",placeholder:"请输入邮箱"},on:{input:function(t){return e.change("email")}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin(t)}},model:{value:e.userForm.email,callback:function(t){e.$set(e.userForm,"email","string"===typeof t?t.trim():t)},expression:"userForm.email"}},[r("svg",{staticClass:"icon",attrs:{slot:"prefix","aria-hidden":"true"},slot:"prefix"},[r("use",{attrs:{"xlink:href":"#iconzhanghu"}})])])],1),r("el-form-item",{attrs:{prop:"userPwd"}},[r("el-input",{attrs:{maxlength:12,clearable:"",placeholder:"请设置您的密码",type:"password"},on:{change:function(t){e.errCode=3}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin(t)}},model:{value:e.userForm.userPwd,callback:function(t){e.$set(e.userForm,"userPwd","string"===typeof t?t.trim():t)},expression:"userForm.userPwd"}},[r("svg",{staticClass:"icon",attrs:{slot:"prefix","aria-hidden":"true"},slot:"prefix"},[r("use",{attrs:{"xlink:href":"#iconmima"}})])])],1),r("el-form-item",{attrs:{prop:"userPwdRepeat"}},[r("el-input",{attrs:{maxlength:12,clearable:"",placeholder:"再次设置您的密码",type:"password"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin(t)}},model:{value:e.userForm.userPwdRepeat,callback:function(t){e.$set(e.userForm,"userPwdRepeat","string"===typeof t?t.trim():t)},expression:"userForm.userPwdRepeat"}},[r("svg",{staticClass:"icon",attrs:{slot:"prefix","aria-hidden":"true"},slot:"prefix"},[r("use",{attrs:{"xlink:href":"#iconmima"}})])])],1),r("el-form-item",{staticClass:"login-item",attrs:{prop:"checked"}},[r("el-checkbox",{staticClass:"check",model:{value:e.userForm.checked,callback:function(t){e.$set(e.userForm,"checked",t)},expression:"userForm.checked"}},[e._v(" 我已阅读并同意 "),r("router-link",{staticClass:"link",attrs:{to:""}},[e._v("《隐私政策声明》")])],1)],1),r("el-form-item",{staticClass:"login-item checked-item"},[r("el-button",{attrs:{type:"violet"},on:{click:e.handleLogin}},[e._v("同意协议并注册")])],1)],1)],1)])])},i=[],a=(r("ac1f"),r("5319"),r("3835")),o=(r("96cf"),r("1da1")),s=r("365c"),c=r("ed08"),u={name:"Register",data:function(){var e=this,t=function(e,t,r){t?r():r(new Error("请勾选服务协议"))},r=function(t,r,n){e.userForm.userPwd!==r?n(new Error("两次密码输入不一致")):n()};return{userForm:{phoneNo:"",email:"",userName:"",userPwd:"",userPwdRepeat:"",bsflag:0,checked:!1},formRule:{userName:[{required:!0,message:"请输入用户名",trigger:["blur","change"]}],email:[{required:!0,message:"请输入邮箱",trigger:["blur","change"]}],phoneNo:[{required:!0,message:"请输入手机号",trigger:["blur","change"]},{min:11,max:11,message:"请输入手机号",trigger:["blur","change"]}],userPwd:[{required:!0,message:"请输入密码",trigger:["blur","change"]},{min:6,max:12,message:"长度在 6 到 12 个字符",trigger:["blur","change"]}],userPwdRepeat:[{required:!0,message:"请输入密码",trigger:["blur","change"]},{min:6,max:12,message:"长度在 6 到 12 个字符",trigger:["blur","change"]},{required:!0,validator:r,trigger:["blur","change"]}],checked:[{required:!0,validator:t,trigger:["blur","change"]}]},smsText:"获取验证码",smsNum:0,waiting:!1}},created:function(){this.debounceSetFullBackground=Object(c["b"])((function(){Object(c["e"])(".register")})),this.handleLogin=Object(c["b"])(this.handleLogin)},mounted:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:Object(c["e"])(".register"),window.addEventListener("resize",e.debounceSetFullBackground);case 2:case"end":return t.stop()}}),t)})))()},methods:{register:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,n,i,o,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.userForm,n=Object.assign({},r),delete n.userPwdRepeat,delete n.checked,t.next=6,Object(s["d"])(n);case 6:i=t.sent,o=Object(a["a"])(i,1),c=o[0],c||(e.$message({message:"注册成功，请登录",type:"success"}),e.registerSuccess());case 10:case"end":return t.stop()}}),t)})))()},registerSuccess:function(){this.$router.replace("/login")},handleLogin:function(){var e=this;this.$refs.userForm.validate((function(t){t&&e.register()}))},change:function(e){this.$refs.userForm.validateField(e)}},beforeDestroy:function(){window.removeEventListener("resize",this.debounceSetFullBackground)}},l=u,d=(r("594e"),r("2877")),m=Object(d["a"])(l,n,i,!1,null,"dd9db746",null);t["default"]=m.exports}}]);
//# sourceMappingURL=user.9517f09c.js.map